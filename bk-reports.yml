---
ReportDefinitions:
- reportName: BookingsApplicationStatusReport
  summary: Nummber of applications by there status
  version: 1.0.0
  moduleName: rainmaker-services
  externalService:
  - entity: $.messages[*]
    apiURL: http://127.0.0.1:8087/localization/messages/v1/_search?locale=en_IN&tenantId=ch&module=rainmaker-services
    keyOrder: code,message
    tableName: tbl_localization
  sourceColumns:
  - name: status
    label: report.bk.bk_application_status
    type: string
    source: bk
    total: false
  - name: total
    label: report.bk.total
    type: string
    source: bk
    total: true
  searchParams:
  - name: fromDate
    label: reports.bk.bk_date_created
    type: epoch
    source: bk
    isMandatory: false
    searchClause: AND bk.bk_date_created >= $fromDate
  - name: toDate
    label: reports.bk.bk_date_created
    type: epoch
    source: bk
    isMandatory: false
    searchClause: AND bk.bk_date_created <= $toDate
  query: select MAX(message) as status, count(bk.bk_application_status) as total from bk_bookings bk LEFT OUTER JOIN message ON message.code = concat('WF_NEWTL_', bk.bk_application_status) AND message.locale = 'en_IN' WHERE bk.tenant_id LIKE $tenantid
  groupby: GROUP BY bk.bk_application_status
  orderby: ORDER BY case bk.bk_application_status when 'INITIATED' then 1 when 'PENDINGASSIGNMENTDRIVER' then 2 when 'DELIVERED' then 3 when 'PENDINGUPDATE' then 4 when 'NOTDELIVERED' then 5 when 'APPLIED' then 6 when 'PENDINGPAYMENT' then 7 when 'PENDINGAPPROVAL' then 8 when 'APPROVED' then 9 when 'REJECTED' then 10 when 'OFFLINE_INITIATED' then 11 when 'OFFLINE_APPLIED' then 12 when 'RE_INITIATED' then 13 when 'PENDING_FOR_APPROVAL_CLEARK_DEO' then 14 when 'PENDING_FOR_APPROVAL_SENIOR_ASSISTANT' then 15 when 'PENDING_FOR_APPROVAL_AUDIT_DEPARTMENT' then 16 when 'PENDING_FOR_APPROVAL_CAO' then 17 when 'PENDING_FOR_DISBURSEMENT' then 18 when 'PAYMENT_DISBURSED' then 19 when 'PENDING_FOR_APPROVAL_SUPERVISOR' then 20 when 'PENDING_FOR_APPROVAL_OSD' then 21 when 'OFFLINE_RE_INITIATED' then 22 when 'OFFLINE_MODIFIED' then 23 else 24 end
